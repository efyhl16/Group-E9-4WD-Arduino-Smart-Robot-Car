#include <LiquidCrystal.h>

//Define LCD pins
const int rs = 8, en = 9, d4 = 4, d5 = 5, d6 = 6, d7 = 7;
LiquidCrystal lcd(rs, en, d4, d5, d6, d7);

//Motor A connected to IN1, IN2
int IN1 = 1;
int IN2 = 3;
int ENA = 2; 

//Motor B connected to IN3, IN4
int IN3 = 11;
int IN4 = 13;
int ENB = 12; 

bool timerStopped = false; //Flag to stop timer after 10 seconds

void setup() {
  //Set up LCD
  lcd.begin(16, 2);
  lcd.print("Timer:");
  
  //Set all motor control pins as outputs
  pinMode(IN1, OUTPUT);
  pinMode(IN2, OUTPUT);
  pinMode(IN3, OUTPUT);
  pinMode(IN4, OUTPUT);
  pinMode(ENA, OUTPUT);
  pinMode(ENB, OUTPUT);

  //Move forward and start timer
  moveForward();
}

void loop() {
  if (!timerStopped) {
    //Update LCD timer if not stopped
    lcd.setCursor(0, 1);
    long seconds = millis() / 1000;

    if (seconds >= 10) {
      stopVehicle();
      seconds = 10; //Lock the display at 10 seconds
      timerStopped = true; //Stop updating the LCD after 10 seconds
    }
    
    lcd.print(seconds);
    lcd.print(" secs    ");
  }
}

void moveForward() {
  analogWrite(ENA, 255); //Max speed for Motor A
  analogWrite(ENB, 255); //Max speed for Motor B
  digitalWrite(IN1, HIGH);
  digitalWrite(IN2, LOW);
  digitalWrite(IN3, HIGH);
  digitalWrite(IN4, LOW);
}

void stopVehicle() {
  analogWrite(ENA, 0);
  analogWrite(ENB, 0);
  digitalWrite(IN1, LOW);
  digitalWrite(IN2, LOW);
  digitalWrite(IN3, LOW);
  digitalWrite(IN4, LOW);
}
